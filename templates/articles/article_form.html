{% extends 'base.html' %}

{% block title %}{% if article %}Editar{% else %}Criar{% endif %} Artigo{% endblock %}

{% block content %}
<div class="form-container" style="max-width: 900px;">
    <h2 class="form-title">{% if article %}âœï¸ Editar Artigo{% else %}âœï¸ Criar Novo Artigo{% endif %}</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label for="id_title" class="form-label">ğŸ“ TÃ­tulo do Artigo</label>
            <input type="text" name="title" id="id_title" value="{% if article %}{{ article.title }}{% endif %}" class="form-input" required placeholder="Digite um tÃ­tulo chamativo...">
        </div>
        
        <div class="form-group">
            <label for="id_excerpt" class="form-label">ğŸ“„ Resumo (opcional)</label>
            <textarea name="excerpt" id="id_excerpt" rows="2" class="form-textarea" placeholder="Breve descriÃ§Ã£o do artigo...">{% if article %}{{ article.excerpt }}{% endif %}</textarea>
            <small style="color: #6b7280; font-size: 0.875rem;">Uma prÃ©via curta que aparecerÃ¡ nos cartÃµes de notÃ­cias</small>
        </div>
        
        <div class="form-group">
            <label for="id_content" class="form-label">ğŸ“° ConteÃºdo</label>
            <textarea name="content" id="id_content" rows="12" class="form-textarea" required placeholder="Escreva o conteÃºdo completo do artigo...">{% if article %}{{ article.content }}{% endif %}</textarea>
        </div>
        
        <div class="form-group">
            <label for="id_image" class="form-label">ğŸ–¼ï¸ Imagem de Capa</label>
            <input type="file" name="image" id="id_image" class="form-input" accept="image/*">
            {% if article.image %}
                <small style="color: #6b7280; font-size: 0.875rem;">Imagem atual: {{ article.image.name }}</small>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="id_tags" class="form-label">ğŸ·ï¸ Tags</label>
            <input type="text" name="tags" id="id_tags" value="{% if article %}{% for tag in article.tags.all %}{{ tag.name }}{% if not forloop.last %}, {% endif %}{% endfor %}{% endif %}" class="form-input" placeholder="polÃ­tica, esportes, tecnologia...">
            <small style="color: #6b7280; font-size: 0.875rem;">Separe as tags por vÃ­rgula</small>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
            <div class="form-group" style="margin-bottom: 0;">
                <label for="id_latitude" class="form-label">ğŸ“ Latitude</label>
                <input type="number" step="any" name="latitude" id="id_latitude" value="{% if article %}{{ article.latitude }}{% endif %}" class="form-input" placeholder="-23.5505">
            </div>
            <div class="form-group" style="margin-bottom: 0;">
                <label for="id_longitude" class="form-label">ğŸ“ Longitude</label>
                <input type="number" step="any" name="longitude" id="id_longitude" value="{% if article %}{{ article.longitude }}{% endif %}" class="form-input" placeholder="-46.6333">
            </div>
        </div>
        
        <div class="form-group">
            <label for="id_location_name" class="form-label">ğŸ—ºï¸ Nome do Local</label>
            <input type="text" name="location_name" id="id_location_name" value="{% if article %}{{ article.location_name }}{% endif %}" class="form-input" placeholder="SÃ£o Paulo, Brasil">
        </div>
        
        <div class="form-group">
            <div class="form-checkbox-group">
                <input type="checkbox" name="published" id="id_published" {% if article.published %}checked{% endif %} class="form-checkbox">
                <label for="id_published">âœ… Publicar artigo imediatamente</label>
            </div>
        </div>
        
        {% if user.profile.role == 'admin' %}
            <div class="form-group">
                <div class="form-checkbox-group">
                    <input type="checkbox" name="featured" id="id_featured" {% if article.featured %}checked{% endif %} class="form-checkbox">
                    <label for="id_featured">â­ Destacar na pÃ¡gina inicial</label>
                </div>
            </div>
        {% endif %}
        
        <div class="btn-group">
            <button type="submit" class="btn btn-success">ğŸ’¾ Salvar Artigo</button>
            <a href="{% if article %}{% url 'article_detail' article.slug %}{% else %}{% url 'home' %}{% endif %}" class="btn btn-secondary">âŒ Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}
